// Type your JavaScript code here...// Runs only on Tealium link events for video interactions.
// Ensures contentID is present before extracting media_id.
(function (a, b) {

  // Only run on link events where event_name === "video"
  if (a !== "link" || !b || b.event_name !== "video") {
    return;
  }

  // Get contentID from data layer
  var cid = utag.data.contentID;

  // Validate contentID
  if (!cid || typeof cid !== "string") return;

  // Clean stray quotes/spaces
  cid = cid.trim().replace(/^\"+|\"+$/g, "");
  
  var mediaID;

  // Extract media ID based on content-discovery pattern
  if (cid.indexOf("content-discovery") > -1) {
    mediaID = cid.split("/")[4] || "";
  } else {
    mediaID = cid.split("/")[3] || "";
  }
  
  // set media_id on the event object
  b.media_id = mediaID;
  
  //also set it on global
  utag.data.media_id = mediaID

})(a, b);